---
title: Game Events
description: How to listen to Source 2 style game events.
---

## Overview

Events are informational notification messages passed between objects in the server. Many are also passed from the server to the client. They are defined in .res files under the hl2/resource folder and resource folders of specific mods. For a basic listing, see [Source2 Game Events](https://cs2.poggu.me/dumped-data/game-events/).

It is important to note a few concepts about events:

- They are almost always informational. That is, blocking player_death will not stop a player from dying. It may block a HUD or console message or something else minor.
- They almost always use userids instead of client slots.
- Just because it is in a resource file does not mean it is ever called, or works the way you expect it to. Mods are notorious for not properly documenting their event functionality.

::callout{icon="i-lucide-lightbulb" color="blue"}
**New**: The `EventInfo` class provides a cleaner way to work with game events, with automatic resource management and typed methods.
::

## Quick Example: Player Death Event

::tabs
  ::div{label="With Classes (Recommended)" icon="lucide:box"}
  ```csharp
  public void RegisterEvents()
  {
      HookEvent("player_death", Event_PlayerDeath);
  }

  public static void Event_PlayerDeath(string name, EventInfo event, bool dontBroadcast)
  {
      // Use typed methods on the EventInfo instance
      int victim_id = event.GetInt("userid");
      int attacker_id = event.GetInt("attacker");

      int victim = victim_id + 1;
      int attacker = attacker_id + 1;

      /* CODE */
  }
  ```
  ::
  ::div{label="Without Classes" icon="lucide:code"}
  ```csharp
  public void RegisterEvents()
  {
      HookEvent("player_death", Event_PlayerDeath);
  }

  public static void Event_PlayerDeath(string name, nint event, bool dontBroadcast)
  {
      // Use functions with explicit event handle
      int victim_id = GetEventInt(event, "userid");
      int attacker_id = GetEventInt(event, "attacker");

      int victim = victim_id + 1;
      int attacker = attacker_id + 1;

      /* CODE */
  }
  ```
  ::
::

## Adding an Event Listener

You can bind event listeners in the `OnPluginStart` (or anywhere you like).

::tabs{variant="card"}
::div{label="c#" icon="vscode-icons:file-type-csharp2"}
  ```csharp
  using Plugify;
  using static s2sdk.s2sdk;
  
  public unsafe class Sample : Plugin
  {
      public void OnPluginStart()
      {
          HookEvent("player_death", (string name, nint event, bool dontBroadcast) =>
          {
              int userid = GetEventInt(event, "userid");
              PrintToServer("event called.\n");
              return ResultType.Continue;
          }, HookMode.Post);
      }
  }
  ```
::
::div{label="c++" icon="vscode-icons:file-type-cpp3"}
  ```cpp
  #include <plg/plugin.hpp>
  #include "s2sdk.hpp"
  
  using namespace s2sdk;
  
  class Sample : public plg::IPluginEntry {
  public:  
      void OnPluginStart() override {
          HookEvent("player_death", [](const plg::string& name, void* event, bool dontBroadcast) -> ResultType {
                  int userid = GetEventInt(event, "userid");
                  PrintToServer("event called.\n");
                  return ResultType.Continue;
              }, HookMode::Post);
      }
  }
  ```
::
::div{label="python" icon="vscode-icons:file-type-python"}
  ```python
  from plugify.plugin import Plugin
  from plugify.pps import s2sdk as s2
  
  class Sample(Plugin):
    def plugin_start(self):
      s2.HookEvent("player_death", lambda name, event, dontBroadcast: (
          ResultType.Continue
          after (
            userid := s2.GetEventInt(event, "userid"),
                   s2.PrintToServer("event called.\n")
            )[1]
      ), s2.HookMode.Post)
  ```
::
::div{label="go" icon="vscode-icons:file-type-go"}
  ```go
  package main

  import (
      "fmt"
      "s2sdk"
      "github.com/untrustedmodders/go-plugify"
  )
  
  func init() {
      plugify.OnPluginStart(func() {
          s2sdk.HookEvent("player_death", func(name string, event uintptr, dontBroadcast bool) {
                  userid := s2sdk.GetEventInt(event, "userid");
                  s2sdk.PrintToServer("event called.\n");
                  return s2sdk.ResultType.Continue;
              }, s2sdk.HookMode.Post)
      })
  }
  ```
::
::div{label="js" icon="vscode-icons:file-type-js-official"}
  ```js
  import { Plugin } from 'plugify';
  import { s2 } from ':s2sdk';

  export class Sample extends Plugin {
      pluginStart() {
          s2.HookEvent("player_death", (name, event, dontBroadcast) => {
                  const userid = s2.GetEventInt(event, "userid");
                  s2.PrintToServer("event called.\n");
                  return s2.ResultType.Continue;
              }, s2.HookMode.Post);
      }
  }
  ```
::
::div{label="lua" icon="vscode-icons:file-type-lua"}
  ```lua
  local plugify = require 'plugify'
  local Plugin = plugify.Plugin
  local s2 = require 's2sdk'
  
  local Sample = {}
  setmetatable(Sample, { __index = Plugin })
  
  function Sample:plugin_start()
      s2:HookEvent("player_death", function(name, event, dontBroadcast)
              local userid = s2:GetEventInt(event, "userid");
              s2:PrintToServer("event called.\n");
              return s2:ResultType.Continue;
          end, s2.HookMode.Post)
  end
  
  local M = {}
  M.Sample = Sample
  return M
  ```
::
::

## Accessing Event Parameters

::tabs
  ::div{label="With Classes (Recommended)" icon="lucide:box"}
  Access event parameters using typed methods on the EventInfo instance:
  ```csharp
  // Reading event parameters
  int userid = event.GetInt("userid");
  float damage = event.GetFloat("damage");
  string weaponName = event.GetString("weapon");
  bool headshot = event.GetBool("headshot");

  // Get entity references
  int playerController = event.GetPlayerController("userid");
  int playerPawn = event.GetPlayerPawn("userid");
  int entity = event.GetEntity("entityid");
  ```

  Setting event parameters is equally simple:
  ```csharp
  // Setting event parameters
  event.SetInt("userid", 123);
  event.SetFloat("damage", 50.0f);
  event.SetString("weapon", "ak47");
  event.SetBool("headshot", true);

  // Set entity references
  event.SetPlayerController("userid", controllerHandle);
  event.SetEntity("entityid", entityHandle);
  ```
  ::
  ::div{label="Without Classes" icon="lucide:code"}
  Access event parameters using explicit functions with the event handle:
  ```csharp
  // Reading event parameters
  int userid = GetEventInt(event, "userid");
  float damage = GetEventFloat(event, "damage");
  string weaponName = GetEventString(event, "weapon");
  bool headshot = GetEventBool(event, "headshot");

  // Get entity references
  int playerController = GetEventPlayerController(event, "userid");
  int playerPawn = GetEventPlayerPawn(event, "userid");
  int entity = GetEventEntity(event, "entityid");
  ```

  Setting event parameters requires explicit function calls:
  ```csharp
  // Setting event parameters
  SetEventInt(event, "userid", 123);
  SetEventFloat(event, "damage", 50.0f);
  SetEventString(event, "weapon", "ak47");
  SetEventBool(event, "headshot", true);

  // Set entity references
  SetEventPlayerController(event, "userid", controllerHandle);
  SetEventEntity(event, "entityid", entityHandle);
  ```
  ::
::

## Creating and Firing Events

::tabs
  ::div{label="With Classes (Recommended)" icon="lucide:box"}
  Create and fire custom events using the EventInfo class:
  ```csharp
  // Create a new event
  using (var customEvent = new EventInfo("player_hurt"))
  {
      // Set event parameters
      customEvent.SetInt("userid", 1);
      customEvent.SetInt("attacker", 2);
      customEvent.SetInt("health", 50);
      customEvent.SetString("weapon", "ak47");

      // Fire to all players
      customEvent.Fire();

      // Or fire to specific player
      customEvent.FireToClient(playerSlot);
  } // Automatically cleaned up
  ```
  ::
  ::div{label="Without Classes" icon="lucide:code"}
  Create and fire custom events using explicit functions:
  ```csharp
  // Create a new event
  nint customEvent = CreateEvent("player_hurt");

  // Set event parameters
  SetEventInt(customEvent, "userid", 1);
  SetEventInt(customEvent, "attacker", 2);
  SetEventInt(customEvent, "health", 50);
  SetEventString(customEvent, "weapon", "ak47");

  // Fire to all players
  FireEvent(customEvent);

  // Or fire to specific player
  FireEventToClient(customEvent, playerSlot);

  // Note: Event is automatically freed after firing
  ```
  ::
::

## Preventing Broadcast

::tabs
  ::div{label="With Classes (Recommended)" icon="lucide:box"}
  Prevent an event from being broadcast to clients:
  ```csharp
  event.SetBroadcast(false);
  ```
  ::
  ::div{label="Without Classes" icon="lucide:code"}
  Prevent an event from being broadcast to clients:
  ```csharp
  SetEventBroadcast(event, false);
  ```
  ::
::

## Cancelling an Event

In a pre-event hook, you can prevent the event from continuing to other plugins by returning `ResultType.Handled` or `ResultType.Stop`.

::tabs
  ::div{label="With Classes (Recommended)" icon="lucide:box"}
  ```csharp
  public void OnPluginStart()
  {
      HookEvent("player_death", OnPlayerDeathPre, HookMode.Pre);
  }

  private static ResultType OnPlayerDeathPre(string name, EventInfo event, bool dontBroadcast)
  {
      int victim = event.GetInt("userid");

      // Cancel death event for admin players
      if (IsPlayerAdmin(victim))
      {
          PrintToServer("Prevented admin death event\n");
          return ResultType.Handled;
      }

      return ResultType.Continue;
  }
  ```
  ::
  ::div{label="Without Classes" icon="lucide:code"}
  ```csharp
  public void OnPluginStart()
  {
      HookEvent("player_death", OnPlayerDeathPre, HookMode.Pre);
  }

  private static ResultType OnPlayerDeathPre(string name, nint event, bool dontBroadcast)
  {
      int victim = GetEventInt(event, "userid");

      // Cancel death event for admin players
      if (IsPlayerAdmin(victim))
      {
          PrintToServer("Prevented admin death event\n");
          return ResultType.Handled;
      }

      return ResultType.Continue;
  }
  ```
  ::
::