---
title: Pulse System Integration
description: How to integrate Valve's Pulse (cs_script) system with Plugify plugins.
---

## Overview

Counter-Strike 2 includes **Pulse** (also known as `cs_script`), a JavaScript-based scripting system that provides access to game entities, events, and functionality. The s2sdk plugin enables Plugify language modules to integrate with Pulse by exposing Valve's module resolver, allowing you to use both Plugify plugins and Valve's Pulse system together.

For more information about Valve's Pulse system, see:
- [Counter-Strike 2 Scripting API](https://developer.valvesoftware.com/wiki/Counter-Strike_2_Workshop_Tools/Scripting_API)
- [Hello Gordon Tutorial](https://developer.valvesoftware.com/wiki/Counter-Strike_2_Workshop_Tools/Scripting/Hello_Gordon)

## The Timing Challenge

There's an important timing consideration when working with Pulse:

- **Plugify plugins load early** during server initialization
- **Pulse modules become available later** after the game rules object is created
- **s2sdk creates a `point_script` entity** once Valve's scripting system is ready

This means you **cannot** import Pulse modules at the top of your plugin file:

```js
// ❌ This will NOT work - Pulse isn't available yet
import { Instance } from "cs_script/point_script";
```

## The Solution: Dynamic Imports

Instead, use the `OnEntityCreated` listener to detect when the `point_script` entity is created, then dynamically import Pulse modules:

```js
// ✅ This works - import after point_script is created
import("cs_script/point_script").then(point_script => {
    const { Instance } = point_script;
    // Now you can use Pulse functionality
});
```

## Complete Integration Example

::tabs{variant="card"}
::div{label="js" icon="vscode-icons:file-type-js-official"}
```js
import { Plugin } from 'plugify';
import * as s2sdk from ':s2sdk';

export class SamplePlugin extends Plugin {
    pluginStart() {
        console.log("Plugin started - waiting for Pulse...");
        s2sdk.OnEntityCreated_Register(SamplePlugin.OnEntityCreated);
    }
    
    pluginEnd() {
        s2sdk.OnEntityCreated_Unregister(SamplePlugin.OnEntityCreated);
    }
    
    static OnEntityCreated(entityHandle) {
        const className = s2sdk.GetEntityClassname(entityHandle);
        
        if (className === "point_script") {
            console.log(`point_script entity created [handle: ${entityHandle}]`);
            
            // Small delay to ensure Pulse is fully initialized
            setTimeout(() => {
                // Dynamically import Pulse modules
                import("cs_script/point_script").then(point_script => {
                    const { Instance } = point_script;
                    
                    console.log("✓ Pulse system connected!");
                    Instance.Msg("✓ Pulse system connected from Plugify!");
                    
                    // Example: Set up a think function
                    Instance.SetThink(() => {
                        Instance.Msg("Think function executing...");
                        return Instance.GetGameTime() + 5.0; // Run every 5 seconds
                    });
                    Instance.SetNextThink(Instance.GetGameTime());
                    
                }).catch(error => {
                    console.error("Failed to import Pulse module:", error);
                });
            }, 100);
        }
    }
}
```
::
::

## Detecting Pulse Availability in Other Languages

While full Pulse integration is JavaScript-specific, other languages can detect when Pulse becomes available:

::tabs{variant="card"}
::div{label="c#" icon="vscode-icons:file-type-csharp2"}
```csharp
using Plugify;
using static s2sdk.s2sdk;

public unsafe class Sample : Plugin
{
    public void OnPluginStart()
    {
        OnEntityCreated_Register(OnEntityCreatedCallback);
    }
    
    public void OnPluginEnd()
    {
        OnEntityCreated_Unregister(OnEntityCreatedCallback);
    }
    
    private static void OnEntityCreatedCallback(int entityHandle)
    {
        string className = GetEntityClassname(entityHandle);
        
        if (className == "point_script")
        {
            PrintToServer("Pulse system is now available!\n");
            // You can now interact with the point_script entity
        }
    }
}
```
::
::div{label="python" icon="vscode-icons:file-type-python"}
```python
from plugify.plugin import Plugin
from plugify.pps import s2sdk as s2

class Sample(Plugin):
    def plugin_start(self):
        s2.OnEntityCreated_Register(self.on_entity_created)
    
    def plugin_end(self):
        s2.OnEntityCreated_Unregister(self.on_entity_created)
    
    @staticmethod
    def on_entity_created(entity_handle):
        class_name = s2.GetEntityClassname(entity_handle)
        
        if class_name == "point_script":
            s2.PrintToServer("Pulse system is now available!\n")
```
::
::div{label="c++" icon="vscode-icons:file-type-cpp3"}
```cpp
#include <plugify/cpp_plugin.hpp>
#include "s2sdk.hpp"

using namespace s2sdk;

class Sample : public plg::IPluginEntry {
public:
    void OnPluginStart() override {
        OnEntityCreated_Register(OnEntityCreatedCallback);
    }
    
    void OnPluginEnd() override {
        OnEntityCreated_Unregister(OnEntityCreatedCallback);
    }
    
private:
    static void OnEntityCreatedCallback(int entityHandle) {
        auto className = GetEntityClassname(entityHandle);
        
        if (className == "point_script") {
            PrintToServer("Pulse system is now available!\n");
        }
    }
};
```
::
::

## Advanced Usage: Hybrid Plugins

You can create powerful hybrid plugins that combine Plugify's multi-language support with Pulse's game integration:

```js
import { Plugin } from 'plugify';
import * as s2sdk from ':s2sdk';

export class HybridPlugin extends Plugin {
    static pulseReady = false;
    static Instance = null;
    
    pluginStart() {
        // Register hooks using s2sdk
        s2sdk.OnEntityCreated_Register(HybridPlugin.OnEntityCreated);
        s2sdk.HookEvent("player_spawn", HybridPlugin.OnPlayerSpawn, s2sdk.HookMode.Post);
    }
    
    static OnEntityCreated(entityHandle) {
        const className = s2sdk.GetEntityClassname(entityHandle);
        
        if (className === "point_script") {
            setTimeout(() => {
                import("cs_script/point_script").then(point_script => {
                    HybridPlugin.Instance = point_script.Instance;
                    HybridPlugin.pulseReady = true;
                    console.log("✓ Hybrid mode active!");
                });
            }, 100);
        }
    }
    
    static OnPlayerSpawn(name, event, dontBroadcast) {
        const userid = s2sdk.GetEventInt(event, "userid");
        
        // Use both s2sdk and Pulse together
        if (HybridPlugin.pulseReady) {
            HybridPlugin.Instance.Msg(`Player spawned: ${userid}`);
        }
        
        return s2sdk.ResultType.Continue;
    }
}
```

## Important Notes

- **The Plugify V8 module** provides Node.js-like features beyond basic JavaScript. See the [official V8 module documentation](https://github.com/untrustedmodders/plugify-module-v8) for details.

- **Always use dynamic imports** for Pulse modules - static imports at the top of the file will fail.

- **Add a small timeout** (e.g., 100ms) after detecting `point_script` to ensure Pulse is fully initialized.

- **Handle import errors** gracefully using `.catch()` on your import promises.

- **Only JavaScript plugins** can fully integrate with Pulse, but other languages can detect when it becomes available.

- **The `point_script` entity** is automatically created by s2sdk once the game rules object exists.

## Common Patterns

### Waiting for Pulse Before Executing Code

```js
export class MyPlugin extends Plugin {
    static waitForPulse(callback) {
        const checkPulse = () => {
            import("cs_script/point_script")
                .then(point_script => callback(point_script.Instance))
                .catch(() => setTimeout(checkPulse, 100));
        };
        checkPulse();
    }
    
    pluginStart() {
        MyPlugin.waitForPulse((Instance) => {
            console.log("Pulse ready, executing plugin logic...");
            Instance.Msg("Plugin initialized!");
        });
    }
}
```

### Using Multiple Pulse Modules

```js
static async loadPulseModules() {
    try {
        const [pointScript, entities, events] = await Promise.all([
            import("cs_script/point_script"),
            import("cs_script/entities"),
            import("cs_script/events")
        ]);
        
        return {
            Instance: pointScript.Instance,
            entities: entities,
            events: events
        };
    } catch (error) {
        console.error("Failed to load Pulse modules:", error);
        return null;
    }
}
```